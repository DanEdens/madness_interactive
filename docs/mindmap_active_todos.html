<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madness Interactive - Project Mind Map</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .stat {
            text-align: center;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
        }
        
        .stat-label {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        #mindmap {
            width: 100%;
            height: 600px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .node {
            cursor: pointer;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        .node circle {
            stroke: white;
            stroke-width: 2px;
        }
        
        .node text {
            font-size: 12px;
            fill: white;
            text-anchor: middle;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .node.todo text {
            font-size: 10px;
            text-anchor: start;
        }
        
        .node.todo circle {
            stroke-width: 1px;
        }
        
        .link {
            fill: none;
            stroke: rgba(255, 255, 255, 0.3);
            stroke-width: 2px;
        }
        
        .link.todo {
            stroke: rgba(255, 255, 255, 0.2);
            stroke-width: 1px;
            stroke-dasharray: 2,2;
        }
        
        /* Todo badge styles */
        .todo-badge {
            pointer-events: none;
        }
        
        .todo-badge circle {
            fill: #ff4757;
            stroke: white;
            stroke-width: 1px;
        }
        
        .todo-badge text {
            fill: white;
            font-size: 10px;
            font-weight: bold;
            text-anchor: middle;
            dominant-baseline: central;
        }
        
        .priority-high { fill: #ff4757; }
        .priority-medium { fill: #ffa502; }
        .priority-low { fill: #2ed573; }
        .status-initial { fill: #5352ed; }
        .status-pending { fill: #ffa502; }
        .status-completed { fill: #2ed573; }
        
        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            max-width: 300px;
            pointer-events: none;
            z-index: 1000;
        }
        
        .tooltip h4 {
            margin: 0 0 5px 0;
            color: #ffa502;
        }
        
        .todo-item {
            margin: 3px 0;
            padding: 2px 5px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .controls {
            text-align: center;
            margin: 20px 0;
        }
        
        .controls button {
            margin: 0 10px;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .controls button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .controls button.active {
            background: rgba(255, 255, 255, 0.4);
        }
        
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin: 20px 0;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            font-size: 0.9em;
        }
        
        .legend-icon {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ§  Madness Interactive Mind Map</h1>
            <p>A Mad Tinker's AI Project Hub Visualization</p>
        </div>
        
        <div class="stats">
            <div class="stat">
                <span class="stat-number">4</span>
                <span class="stat-label">Projects</span>
            </div>
            <div class="stat">
                <span class="stat-number">0</span>
                <span class="stat-label">Technologies</span>
            </div>
            <div class="stat">
                <span class="stat-number">4</span>
                <span class="stat-label">Categories</span>
            </div>
            <div class="stat">
                <span class="stat-number">129</span>
                <span class="stat-label">Active Todos</span>
            </div>
        </div>
        
        <div class="legend">
            
        </div>
        
        
        
        <div id="mindmap"></div>
    </div>
    
    <div class="tooltip" id="tooltip" style="display: none;"></div>
    
    <script>
        const data = {
  "name": "Active Todo Projects",
  "type": "root",
  "language": "",
  "description": "Current active projects tracked in todo system (completed todos filtered out)",
  "metadata": {
    "scan_time": "2025-06-30T18:23:45.018924",
    "total_projects": 4,
    "todo_enabled": true,
    "total_todos": 129,
    "target_projects": [
      "madness_interactive",
      "swarmonomicon",
      "todomill_projectorium",
      "inventorium",
      "SwarmDesk"
    ],
    "active_projects": [
      "madness_interactive",
      "swarmonomicon",
      "todomill_projectorium",
      "inventorium"
    ]
  },
  "children": [
    {
      "name": "madness_interactive",
      "type": "project",
      "language": "mixed",
      "description": "Active project with 50 active todos",
      "metadata": {
        "category": "Active Project",
        "todo_count": 50,
        "high_priority_count": 21,
        "medium_priority_count": 22,
        "low_priority_count": 6,
        "status_initial": 0,
        "status_pending": 50,
        "status_completed": 0
      },
      "children": [
        {
          "name": "67eeb036... Review and consolida...",
          "type": "todo",
          "language": "",
          "description": "Review and consolidate ARCHITECTURE.md file - separate Python architecture from Rust implementation details. Update with recent changes to GTK prelude and path utilities.",
          "metadata": {
            "todo_id": "67eeb036c77c7c26997635f4",
            "status": "pending",
            "priority": "high",
            "created_at": 1743695926,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "67f14c3a... Implement comprehens...",
          "type": "todo",
          "language": "",
          "description": "Implement comprehensive error handling and logging system across all microservices:\\n1. Create standardized error response formats\\n2. Develop centralized logging mechanism\\n3. Add contextual error tracking\\n4. Implement error monitoring and alerting\\n5. Ensure GDPR and data privacy compliance in error logging",
          "metadata": {
            "todo_id": "67f14c3ab6e525b811e6d3e2",
            "status": "pending",
            "priority": "high",
            "created_at": 1743866938,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6803ca3e... Consolidate document...",
          "type": "todo",
          "language": "",
          "description": "Consolidate documentation by creating a centralized documentation structure with consistent formatting and cross-referencing",
          "metadata": {
            "todo_id": "6803ca3e17592b6e8b3809a2",
            "status": "pending",
            "priority": "high",
            "created_at": 1745078846,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "682254c0... test the docker depl...",
          "type": "todo",
          "language": "",
          "description": "test the docker deployment on other system types",
          "metadata": {
            "todo_id": "682254c0d8d99be6a20b3168",
            "status": "pending",
            "priority": "high",
            "created_at": 1747080357,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683a9255... Create shared projec...",
          "type": "todo",
          "language": "",
          "description": "Create shared project list service accessible via MCP tool and/or HTTP endpoint - design centralized project management system that all projects (Swarmonomicon, Omnispindle, Node-RED, etc.) can call to get consistent project names and metadata. Consider both MCP tool interface and HTTP REST API similar to mqtt-from-http.json pattern. Should include project validation, normalization, and CRUD operations.",
          "metadata": {
            "todo_id": "683a9255476bb1951fc4ab9b",
            "status": "pending",
            "priority": "high",
            "created_at": 1748669013,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6840a097... Design and implement...",
          "type": "todo",
          "language": "",
          "description": "Design and implement Google Drive API integration for automated Tasker config backup retrieval, processing, and organization system for the tasker projects subrepo",
          "metadata": {
            "todo_id": "6840a097a8e76663ec6b852d",
            "status": "pending",
            "priority": "high",
            "created_at": 1749065879,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68410613... BalenaOS Upgrade Imp...",
          "type": "todo",
          "language": "",
          "description": "BalenaOS Upgrade Impact Investigation for @phoenix project",
          "metadata": {
            "todo_id": "68410613a8e76663ec6b8536",
            "status": "pending",
            "priority": "high",
            "created_at": 1749091859,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "684830eb... Create a workflow fo...",
          "type": "todo",
          "language": "",
          "description": "Create a workflow for interactive project selection and initialization",
          "metadata": {
            "todo_id": "684830eb21b1fb74656160ae",
            "status": "pending",
            "priority": "high",
            "created_at": 1749561579,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68485619... Create an AI-generat...",
          "type": "todo",
          "language": "",
          "description": "Create an AI-generated video demonstrating the full Omnispindle workflow. The video should start with on-the-fly ToDo creation via the CLI, move to the web dashboard for refinement and prioritization, show AI agents suggesting tweaks and adding context, and culminate in project- and concept-based agents autonomously executing tasks like UI assessment, market research, and code implementation based on the curated ToDo items.",
          "metadata": {
            "todo_id": "6848561921b1fb74656160b0",
            "status": "pending",
            "priority": "high",
            "created_at": 1749571097,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "680c4908... Test the AI insights...",
          "type": "todo",
          "language": "",
          "description": "Test the AI insights feature in the Todo dashboard using the Qwen3 API endpoint",
          "metadata": {
            "todo_id": "680c4908086c2a7279d53361",
            "status": "pending",
            "priority": "initial",
            "created_at": 1745635592,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "680c4b53... Implement search fun...",
          "type": "todo",
          "language": "",
          "description": "Implement search functionality for the Grimoire documentation generator",
          "metadata": {
            "todo_id": "680c4b53086c2a7279d53369",
            "status": "pending",
            "priority": "medium",
            "created_at": 1745636179,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68238f9f... expand the madness_i...",
          "type": "todo",
          "language": "",
          "description": "expand the madness_interactive shared chats repo into shared githooks aswell as others",
          "metadata": {
            "todo_id": "68238f9f3e2454189372a865",
            "status": "pending",
            "priority": "medium",
            "created_at": 1747160964,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68406f90... Add auto trigger on ...",
          "type": "todo",
          "language": "",
          "description": "Add auto trigger on boot up option to node-red-contrib-file-template",
          "metadata": {
            "todo_id": "68406f90a8e76663ec6b8526",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749053328,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68408eca... Review and update ou...",
          "type": "todo",
          "language": "",
          "description": "Review and update outdated README files across the Madness Interactive ecosystem, particularly for projects like scripts/, tasker projects, LegoScry, and gateway_metrics that have incomplete or outdated documentation",
          "metadata": {
            "todo_id": "68408ecaa8e76663ec6b8528",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749061322,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6840a0cb... Implement Google Dri...",
          "type": "todo",
          "language": "",
          "description": "Implement Google Drive API integration component for Tasker backup retrieval with OAuth2 authentication, rate limiting, and incremental sync capabilities",
          "metadata": {
            "todo_id": "6840a0cba8e76663ec6b852e",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749065931,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68417326... https://github.com/z...",
          "type": "todo",
          "language": "",
          "description": "https://github.com/zacswider/mergechannels integrate this into a landing page for sign ups",
          "metadata": {
            "todo_id": "684173266f5d4310c8aa9190",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749098425,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68447a70... Create example flows...",
          "type": "todo",
          "language": "",
          "description": "Create example flows and documentation showing how to use the mad-template-ai node with different data sources",
          "metadata": {
            "todo_id": "68447a70f9125e0932d41022",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749318256,
            "updated_at": 1749318436,
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "684830d5... Create a Makefile ta...",
          "type": "todo",
          "language": "",
          "description": "Create a Makefile target workflow to install aliases for a project",
          "metadata": {
            "todo_id": "684830d521b1fb74656160a9",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749561557,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "680c4b50... Add dark mode suppor...",
          "type": "todo",
          "language": "",
          "description": "Add dark mode support to the Grimoire documentation generator themes",
          "metadata": {
            "todo_id": "680c4b50086c2a7279d53368",
            "status": "pending",
            "priority": "low",
            "created_at": 1745636176,
            "updated_at": "",
            "priority_color": "#2ed573",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6840a0d7... Setup automated sche...",
          "type": "todo",
          "language": "",
          "description": "Setup automated scheduler for weekly Tasker backup sync with MQTT notifications, error handling, and integration with Omnispindle for issue tracking",
          "metadata": {
            "todo_id": "6840a0d7a8e76663ec6b8530",
            "status": "pending",
            "priority": "low",
            "created_at": 1749065943,
            "updated_at": "",
            "priority_color": "#2ed573",
            "status_color": "#ffa502"
          },
          "children": []
        }
      ],
      "todo_summary": {
        "total": 50,
        "initial": 0,
        "pending": 50,
        "completed": 0,
        "high_priority": 21,
        "medium_priority": 22,
        "low_priority": 6,
        "recent_todos": [
          {
            "id": "67eeb036c77c7c26997635f4",
            "description": "Review and consolidate ARCHITECTURE.md file - separate Python architecture from ...",
            "status": "pending",
            "priority": "high"
          },
          {
            "id": "67f14c3ab6e525b811e6d3e2",
            "description": "Implement comprehensive error handling and logging system across all microservic...",
            "status": "pending",
            "priority": "high"
          },
          {
            "id": "6803ca3e17592b6e8b3809a2",
            "description": "Consolidate documentation by creating a centralized documentation structure with...",
            "status": "pending",
            "priority": "high"
          }
        ]
      }
    },
    {
      "name": "swarmonomicon",
      "type": "project",
      "language": "mixed",
      "description": "Active project with 25 active todos",
      "metadata": {
        "category": "Active Project",
        "todo_count": 25,
        "high_priority_count": 11,
        "medium_priority_count": 12,
        "low_priority_count": 2,
        "status_initial": 0,
        "status_pending": 25,
        "status_completed": 0
      },
      "children": [
        {
          "name": "67f6a4d0... Test Spindlewrit too...",
          "type": "todo",
          "language": "",
          "description": "Test Spindlewrit tool with Gemma AI integration - implementation complete",
          "metadata": {
            "todo_id": "67f6a4d04c93c8135ae78c80",
            "status": "pending",
            "priority": "high",
            "created_at": 1744217296,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6803cada... Add more comprehensi...",
          "type": "todo",
          "language": "",
          "description": "Add more comprehensive integration tests for todo_worker to verify MQTT interaction and error handling",
          "metadata": {
            "todo_id": "6803cada17592b6e8b3809a5",
            "status": "pending",
            "priority": "high",
            "created_at": 1745079002,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68129efc... MASTER: Update Swarm...",
          "type": "todo",
          "language": "",
          "description": "MASTER: Update Swarmonomicon Todo Worker for Advanced Status Handling",
          "metadata": {
            "todo_id": "68129efcb17fdda06aec2c28",
            "status": "pending",
            "priority": "high",
            "created_at": 1746050812,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68129f02... Update Swarmonomicon...",
          "type": "todo",
          "language": "",
          "description": "Update Swarmonomicon worker to recognize new task statuses",
          "metadata": {
            "todo_id": "68129f02b17fdda06aec2c29",
            "status": "pending",
            "priority": "high",
            "created_at": 1746050818,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68129f07... Implement status-spe...",
          "type": "todo",
          "language": "",
          "description": "Implement status-specific processing logic in Todo Worker",
          "metadata": {
            "todo_id": "68129f07b17fdda06aec2c2a",
            "status": "pending",
            "priority": "high",
            "created_at": 1746050823,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6812a19a... Refine Project Inter...",
          "type": "todo",
          "language": "",
          "description": "Refine Project Interconnection Model in Top-Level Agent Prompt System",
          "metadata": {
            "todo_id": "6812a19ab17fdda06aec2c2f",
            "status": "pending",
            "priority": "high",
            "created_at": 1746051482,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "681d3dc0... fix the logging in s...",
          "type": "todo",
          "language": "",
          "description": "fix the logging in swarmonomicon to only use the verbage 'adding new todo' when a database entry is actually sent\n",
          "metadata": {
            "todo_id": "681d3dc0b7dc3f244508fee1",
            "status": "pending",
            "priority": "high",
            "created_at": 1746746789,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683a17be... Clean up existing to...",
          "type": "todo",
          "language": "",
          "description": "Clean up existing todo items to unified schema and remove inconsistent fields",
          "metadata": {
            "todo_id": "683a17be476bb1951fc4ab92",
            "status": "pending",
            "priority": "high",
            "created_at": 1748637630,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "67f6a574... Document the Spindle...",
          "type": "todo",
          "language": "",
          "description": "Document the Spindlewrit integration with ProjectAgent",
          "metadata": {
            "todo_id": "67f6a5748b92a6f4aef5a331",
            "status": "pending",
            "priority": "medium",
            "created_at": 1744217460,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "67f6a792... Create comprehensive...",
          "type": "todo",
          "language": "",
          "description": "Create comprehensive tests for Spindlewrit's project generation capabilities",
          "metadata": {
            "todo_id": "67f6a792018bd168810b2468",
            "status": "pending",
            "priority": "medium",
            "created_at": 1744218002,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6803cad4... Consider adding stru...",
          "type": "todo",
          "language": "",
          "description": "Consider adding structured logging to todo_worker with different log levels (error, warn, info, debug) for better observability and debugging",
          "metadata": {
            "todo_id": "6803cad417592b6e8b3809a3",
            "status": "pending",
            "priority": "medium",
            "created_at": 1745078996,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6803cad7... Add configuration fi...",
          "type": "todo",
          "language": "",
          "description": "Add configuration files for todo_worker to make it easier to customize behavior without recompiling",
          "metadata": {
            "todo_id": "6803cad717592b6e8b3809a4",
            "status": "pending",
            "priority": "medium",
            "created_at": 1745078999,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68129f0f... Configure worker que...",
          "type": "todo",
          "language": "",
          "description": "Configure worker queue filters for new status types",
          "metadata": {
            "todo_id": "68129f0fb17fdda06aec2c2b",
            "status": "pending",
            "priority": "medium",
            "created_at": 1746050831,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68129f20... Implement retry logi...",
          "type": "todo",
          "language": "",
          "description": "Implement retry logic for pending-complete and pending-cluster statuses",
          "metadata": {
            "todo_id": "68129f20b17fdda06aec2c2d",
            "status": "pending",
            "priority": "medium",
            "created_at": 1746050848,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "681d3d3b... Give swarmonomicon b...",
          "type": "todo",
          "language": "",
          "description": "Give swarmonomicon better context on assigning todos to projects and filling out the missing fields",
          "metadata": {
            "todo_id": "681d3d3bb7dc3f244508fee0",
            "status": "pending",
            "priority": "medium",
            "created_at": 1746746669,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "68295b7f... setup some logic to ...",
          "type": "todo",
          "language": "",
          "description": "setup some logic to allow for shorter responses from swarmonomicon",
          "metadata": {
            "todo_id": "68295b7f0180f70092ef7fd6",
            "status": "pending",
            "priority": "medium",
            "created_at": 1747540813,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683a1686... Refactor lessons lea...",
          "type": "todo",
          "language": "",
          "description": "Refactor lessons learned to treat language as a tag instead of parsing complex language strings",
          "metadata": {
            "todo_id": "683a1686476bb1951fc4ab90",
            "status": "pending",
            "priority": "medium",
            "created_at": 1748637318,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683fe1ff... swarmonomicon logfil...",
          "type": "todo",
          "language": "",
          "description": "swarmonomicon logfile added in commit dd9b7a29be33420cbfd780c36b400277c9bf3aae has a warning message that needs reviewing",
          "metadata": {
            "todo_id": "683fe1ff7ccffddf25d76a45",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749017064,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683fe3fb... in swarmonomicon, we...",
          "type": "todo",
          "language": "",
          "description": "in swarmonomicon, we need to change the mqtt succes pub to include the generated id and perhaps the mcp tools test command for get_todo_tool",
          "metadata": {
            "todo_id": "683fe3fb7ccffddf25d76a49",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749017573,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683a17c9... Implement bulk opera...",
          "type": "todo",
          "language": "",
          "description": "Implement bulk operations for todo management (bulk complete, bulk delete, bulk project transfer)",
          "metadata": {
            "todo_id": "683a17c9476bb1951fc4ab94",
            "status": "pending",
            "priority": "low",
            "created_at": 1748637641,
            "updated_at": "",
            "priority_color": "#2ed573",
            "status_color": "#ffa502"
          },
          "children": []
        }
      ],
      "todo_summary": {
        "total": 25,
        "initial": 0,
        "pending": 25,
        "completed": 0,
        "high_priority": 11,
        "medium_priority": 12,
        "low_priority": 2,
        "recent_todos": [
          {
            "id": "67f6a4d04c93c8135ae78c80",
            "description": "Test Spindlewrit tool with Gemma AI integration - implementation complete",
            "status": "pending",
            "priority": "high"
          },
          {
            "id": "67f6a5748b92a6f4aef5a331",
            "description": "Document the Spindlewrit integration with ProjectAgent",
            "status": "pending",
            "priority": "medium"
          },
          {
            "id": "67f6a792018bd168810b2468",
            "description": "Create comprehensive tests for Spindlewrit's project generation capabilities",
            "status": "pending",
            "priority": "medium"
          }
        ]
      }
    },
    {
      "name": "todomill_projectorium",
      "type": "project",
      "language": "mixed",
      "description": "Active project with 7 active todos",
      "metadata": {
        "category": "Active Project",
        "todo_count": 7,
        "high_priority_count": 3,
        "medium_priority_count": 3,
        "low_priority_count": 1,
        "status_initial": 0,
        "status_pending": 7,
        "status_completed": 0
      },
      "children": [
        {
          "name": "68309b95... Test the standalone ...",
          "type": "todo",
          "language": "",
          "description": "Test the standalone TodoLogService for monitoring todo changes: Verify that the TodoLogService correctly tracks all todo operations (create, update, delete, complete), persists logs to MongoDB, and provides query functionality through the FastMCP API.",
          "metadata": {
            "todo_id": "68309b950c8e63ce953bf03d",
            "status": "pending",
            "priority": "high",
            "created_at": 1748016021,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683dc70b... Implement a `Create ...",
          "type": "todo",
          "language": "",
          "description": "Implement a `Create New` todo item feature in the UI. This requires adding a `Create New` button to `todoeditor.html` and developing the corresponding backend functionality to perform a MongoDB insert operation for new todo items.",
          "metadata": {
            "todo_id": "683dc70bc5dfc312bef82ec1",
            "status": "pending",
            "priority": "high",
            "created_at": 1748879115,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "684ae481... Add missing MCP/AI n...",
          "type": "todo",
          "language": "",
          "description": "Add missing MCP/AI nodes to UI-Template-subsection.json for chat assistant functionality with MCP tooling integration",
          "metadata": {
            "todo_id": "684ae481283091eb9596a3da",
            "status": "pending",
            "priority": "high",
            "created_at": 1749738625,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683dd9cc... Apply dynamic CSS cl...",
          "type": "todo",
          "language": "",
          "description": "Apply dynamic CSS class assignment (similar to msg.className for cards) to parent containers of existing HTML tabs for custom styling.",
          "metadata": {
            "todo_id": "683dd9ccc5dfc312bef82ec2",
            "status": "pending",
            "priority": "medium",
            "created_at": 1748883916,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683fd74f... Test node-red-contri...",
          "type": "todo",
          "language": "",
          "description": "Test node-red-contrib-file-template in actual Node-RED installation with TodoList.html",
          "metadata": {
            "todo_id": "683fd74fc5dfc312bef82ed0",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749014351,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6849e425... Update TodoMill proj...",
          "type": "todo",
          "language": "",
          "description": "Update TodoMill projectorium to use centralized list_projects_tool instead of hardcoded project arrays. Need to modify TodoList.html and TodoLog.html to call Omnispindle MCP endpoint for project dropdown populations. Replace static scope.projects arrays with dynamic API calls.",
          "metadata": {
            "todo_id": "6849e425d5643e4720b6288a",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749672997,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683fd754... Update Todomill_proj...",
          "type": "todo",
          "language": "",
          "description": "Update Todomill_projectorium documentation to reference new file-template node",
          "metadata": {
            "todo_id": "683fd754c5dfc312bef82ed1",
            "status": "pending",
            "priority": "low",
            "created_at": 1749014356,
            "updated_at": "",
            "priority_color": "#2ed573",
            "status_color": "#ffa502"
          },
          "children": []
        }
      ],
      "todo_summary": {
        "total": 7,
        "initial": 0,
        "pending": 7,
        "completed": 0,
        "high_priority": 3,
        "medium_priority": 3,
        "low_priority": 1,
        "recent_todos": [
          {
            "id": "68309b950c8e63ce953bf03d",
            "description": "Test the standalone TodoLogService for monitoring todo changes: Verify that the ...",
            "status": "pending",
            "priority": "high"
          },
          {
            "id": "683dc70bc5dfc312bef82ec1",
            "description": "Implement a `Create New` todo item feature in the UI. This requires adding a `Cr...",
            "status": "pending",
            "priority": "high"
          },
          {
            "id": "683dd9ccc5dfc312bef82ec2",
            "description": "Apply dynamic CSS class assignment (similar to msg.className for cards) to paren...",
            "status": "pending",
            "priority": "medium"
          }
        ]
      }
    },
    {
      "name": "inventorium",
      "type": "project",
      "language": "mixed",
      "description": "Active project with 47 active todos",
      "metadata": {
        "category": "Active Project",
        "todo_count": 47,
        "high_priority_count": 19,
        "medium_priority_count": 22,
        "low_priority_count": 6,
        "status_initial": 0,
        "status_pending": 46,
        "status_completed": 0
      },
      "children": [
        {
          "name": "67c227ef... Implement user authe...",
          "type": "todo",
          "language": "",
          "description": "Implement user authentication and authorization for multi-user support",
          "metadata": {
            "todo_id": "67c227ef73911114158d5481",
            "status": "pending",
            "priority": "high",
            "created_at": 1740777455,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "680e743e... Enhance security for...",
          "type": "todo",
          "language": "",
          "description": "Enhance security for madnessinteractive.cc: Implement HTTPS with Let's Encrypt, restrict SSH access to specific IPs, setup fail2ban, and enable firewall rules to protect against common attacks.",
          "metadata": {
            "todo_id": "680e743e086c2a7279d5336a",
            "status": "pending",
            "priority": "high",
            "created_at": 1745777726,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6810026f... run the new update_s...",
          "type": "todo",
          "language": "",
          "description": "run the new update_sec.sh for inventorium",
          "metadata": {
            "todo_id": "6810026f465c17755587a696",
            "status": "pending",
            "priority": "high",
            "created_at": 1745879638,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683bd521... Transform Inventoriu...",
          "type": "todo",
          "language": "",
          "description": "Transform Inventorium from simple website into React-based frontend for Todomill dashboard with user authentication",
          "metadata": {
            "todo_id": "683bd521c5dfc312bef82ead",
            "status": "pending",
            "priority": "high",
            "created_at": 1748751649,
            "updated_at": 1748752305,
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "684f6415... Test React frontend ...",
          "type": "todo",
          "language": "",
          "description": "Test React frontend connection to backend API - verify todo CRUD operations work through the live website",
          "metadata": {
            "todo_id": "684f6415a4eaff62866c129b",
            "status": "pending",
            "priority": "high",
            "created_at": 1750033429,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "684f65e1... \ud83c\udf89 DEPLOYMENT SUCCESS...",
          "type": "todo",
          "language": "",
          "description": "\ud83c\udf89 DEPLOYMENT SUCCESS: Madness Interactive Inventorium is now fully operational! React frontend connected to Node.js backend API (port 9192) with MongoDB swarmonomicon database. All systems working: Auth0 hybrid authentication, demo mode (madtinker/workshop2025), API proxy through nginx, PM2 process management. Ready for production use!",
          "metadata": {
            "todo_id": "684f65e1a4eaff62866c129d",
            "status": "pending",
            "priority": "high",
            "created_at": 1750033889,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6850715e... \ud83d\ude80 INVENTORIUM DEMO: ...",
          "type": "todo",
          "language": "",
          "description": "\ud83d\ude80 INVENTORIUM DEMO: Set up authentication and data loading for React frontend demo. Make demo credentials connect to current user data just like Todomill_projectorium. Fix Basic auth token handling in AuthContext and API client.",
          "metadata": {
            "todo_id": "6850715ea4eaff62866c12af",
            "status": "pending",
            "priority": "high",
            "created_at": 1750102366,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "685074dd... \ud83d\ude80 PRODUCTION DEPLOYM...",
          "type": "todo",
          "language": "",
          "description": "\ud83d\ude80 PRODUCTION DEPLOYMENT SUCCESS: React Inventorium app deployed to madnessinteractive.cc! Demo authentication working with production API, 93 todos accessible via madtinker/workshop2025 credentials. Ready for public demo and Node-RED to React migration work.",
          "metadata": {
            "todo_id": "685074dda4eaff62866c12b4",
            "status": "pending",
            "priority": "high",
            "created_at": 1750103261,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6850794e... \ud83c\udf89 FULL AUTHENTICATIO...",
          "type": "todo",
          "language": "",
          "description": "\ud83c\udf89 FULL AUTHENTICATION SYSTEM DEPLOYED: React Inventorium app now live at https://madnessinteractive.cc with complete Auth0 and demo authentication! Error boundary added for debugging, API confirmed working with 95 todos. Demo credentials (madtinker/workshop2025) connect to production data. Ready for Node-RED to React translation work!",
          "metadata": {
            "todo_id": "6850794ea4eaff62866c12b6",
            "status": "pending",
            "priority": "high",
            "created_at": 1750104398,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6850b6b2... \ud83c\udf89 ALL DATA MAPPING B...",
          "type": "todo",
          "language": "",
          "description": "\ud83c\udf89 ALL DATA MAPPING BUGS FIXED! Successfully resolved both .map() errors: 1) Fixed todos data extraction from todosData.todos array, 2) Fixed projects data extraction from projectsData.projects array. Dashboard now properly renders 95 todos and 23 projects with correct object structure. React app fully functional at https://madnessinteractive.cc!",
          "metadata": {
            "todo_id": "6850b6b2a4eaff62866c12c2",
            "status": "pending",
            "priority": "high",
            "created_at": 1750120114,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6853136c... Setup automated comm...",
          "type": "todo",
          "language": "",
          "description": "Setup automated commit hook system with dashboard screenshot automation. Created post-commit hook, Playwright screenshot script, manual verification tools, and comprehensive documentation. Screenshots are automatically captured after every commit for visual verification.",
          "metadata": {
            "todo_id": "6853136c1ffae12d0bb04b06",
            "status": "pending",
            "priority": "high",
            "created_at": 1750274924,
            "updated_at": "",
            "priority_color": "#ff4757",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "680e7441... Research and impleme...",
          "type": "todo",
          "language": "",
          "description": "Research and implement user login system for madnessinteractive.cc: Evaluate authentication options (Auth0, Cognito, or custom), design user profile structure, and implement secure login/registration functionality.",
          "metadata": {
            "todo_id": "680e7441086c2a7279d5336b",
            "status": "review",
            "priority": "medium",
            "created_at": 1745777729,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#5352ed"
          },
          "children": []
        },
        {
          "name": "6841abbf... Fix SSL certificates...",
          "type": "todo",
          "language": "",
          "description": "Fix SSL certificates for madnessinteractive.cc domain - DNS pointing issue preventing Let's Encrypt certificate generation",
          "metadata": {
            "todo_id": "6841abbff9125e0932d4101c",
            "status": "pending",
            "priority": "medium",
            "created_at": 1749134271,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6850b990... \ud83d\uddfa\ufe0f NODE-RED TO REACT...",
          "type": "todo",
          "language": "",
          "description": "\ud83d\uddfa\ufe0f NODE-RED TO REACT TRANSLATION ROADMAP: Phase 2 - TodoLog Component. Implement activity logging with filters, pagination, and real-time updates. Show todo operations (create, update, delete, complete) with timestamps and user info. Based on TodoLog.html template.",
          "metadata": {
            "todo_id": "6850b990a4eaff62866c12c6",
            "status": "pending",
            "priority": "medium",
            "created_at": 1750120848,
            "updated_at": 1750121827,
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6850b996... \ud83d\uddfa\ufe0f NODE-RED TO REACT...",
          "type": "todo",
          "language": "",
          "description": "\ud83d\uddfa\ufe0f NODE-RED TO REACT TRANSLATION ROADMAP: Phase 3 - ChatAssistant Component. Implement AI-powered chat interface for todo management. Include MCP (Model Context Protocol) integration, smart suggestions, and natural language todo operations. Based on TodoChat.html template.",
          "metadata": {
            "todo_id": "6850b996a4eaff62866c12c8",
            "status": "pending",
            "priority": "medium",
            "created_at": 1750120854,
            "updated_at": 1750121849,
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6853123f... Fixed runtime errors...",
          "type": "todo",
          "language": "",
          "description": "Fixed runtime errors: Added defensive array handling to useAdvancedTodos hook to prevent 'todos.forEach is not a function' errors. Implemented safe state updates and error recovery throughout the todo management system.",
          "metadata": {
            "todo_id": "6853123f1ffae12d0bb04b04",
            "status": "pending",
            "priority": "medium",
            "created_at": 1750274623,
            "updated_at": "",
            "priority_color": "#ffa502",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "683bdcb9... Create read-only pub...",
          "type": "todo",
          "language": "",
          "description": "Create read-only public dashboard view for non-authenticated users to watch live project board. Features needed: 1) Public route (/public or /watch) that bypasses authentication, 2) Read-only TodoList component with viewing restrictions (no edit/delete/complete actions), 3) Live data refresh (polling or websocket), 4) Public TodoStats showing aggregate metrics only, 5) Project filtering for public visibility settings, 6) Responsive design optimized for viewing on various devices, 7) Optional \"Watch Mode\" branding/theming, 8) Rate limiting for API calls, 9) Cache optimization for public data, 10) SEO-friendly meta tags for sharing. Should integrate with existing API but with public endpoint restrictions. Consider adding optional URL parameters for filtering by project or status for embeddable widgets.",
          "metadata": {
            "todo_id": "683bdcb9c5dfc312bef82eb2",
            "status": "pending",
            "priority": "low",
            "created_at": 1748753593,
            "updated_at": 1749134260,
            "priority_color": "#2ed573",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6850b99b... \ud83d\uddfa\ufe0f NODE-RED TO REACT...",
          "type": "todo",
          "language": "",
          "description": "\ud83d\uddfa\ufe0f NODE-RED TO REACT TRANSLATION ROADMAP: Phase 4 - ProjectEdit Component. Implement project management interface with CRUD operations, project metadata editing, and todo count tracking. Based on ProjectEdit.html template from Node-RED.",
          "metadata": {
            "todo_id": "6850b99ba4eaff62866c12ca",
            "status": "pending",
            "priority": "low",
            "created_at": 1750120859,
            "updated_at": 1750121869,
            "priority_color": "#2ed573",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6850b9d5... \ud83d\uddfa\ufe0f NODE-RED TO REACT...",
          "type": "todo",
          "language": "",
          "description": "\ud83d\uddfa\ufe0f NODE-RED TO REACT TRANSLATION ROADMAP: Phase 5 - Advanced Features. Implement Node-RED's advanced features: bulk operations, AI insights, priority distribution charts, workflow efficiency metrics, and real-time dashboard updates.",
          "metadata": {
            "todo_id": "6850b9d5a4eaff62866c12cc",
            "status": "pending",
            "priority": "low",
            "created_at": 1750120917,
            "updated_at": 1750121890,
            "priority_color": "#2ed573",
            "status_color": "#ffa502"
          },
          "children": []
        },
        {
          "name": "6850db67... \ud83d\udcd6 Document rsync dep...",
          "type": "todo",
          "language": "",
          "description": "\ud83d\udcd6 Document rsync deployment improvements in README. Create deployment guide explaining the new rsync-based deployment system, performance benefits, and usage instructions for the enhanced deploy.sh script with Quick Deploy option.",
          "metadata": {
            "todo_id": "6850db671ffae12d0bb04ad0",
            "status": "pending",
            "priority": "low",
            "created_at": 1750129511,
            "updated_at": "",
            "priority_color": "#2ed573",
            "status_color": "#ffa502"
          },
          "children": []
        }
      ],
      "todo_summary": {
        "total": 47,
        "initial": 0,
        "pending": 46,
        "completed": 0,
        "high_priority": 19,
        "medium_priority": 22,
        "low_priority": 6,
        "recent_todos": [
          {
            "id": "67c227ef73911114158d5481",
            "description": "Implement user authentication and authorization for multi-user support",
            "status": "pending",
            "priority": "high"
          },
          {
            "id": "680e743e086c2a7279d5336a",
            "description": "Enhance security for madnessinteractive.cc: Implement HTTPS with Let's Encrypt, ...",
            "status": "pending",
            "priority": "high"
          },
          {
            "id": "680e7441086c2a7279d5336b",
            "description": "Research and implement user login system for madnessinteractive.cc: Evaluate aut...",
            "status": "review",
            "priority": "medium"
          }
        ]
      }
    }
  ]
};
        let showTodos = true;
        
        const width = document.getElementById('mindmap').clientWidth;
        const height = 600;
        
        const svg = d3.select("#mindmap")
            .append("svg")
            .attr("width", width)
            .attr("height", height);
        
        const g = svg.append("g");
        
        // Create zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 4])
            .on("zoom", (event) => {
                g.attr("transform", event.transform);
            });
        
        svg.call(zoom);
        
        // Create tree layout
        const tree = d3.tree()
            .size([height - 100, width - 200])
            .separation((a, b) => (a.parent == b.parent ? 1 : 2) / a.depth);
        
        // Create hierarchy
        const root = d3.hierarchy(data);
        
        // Collapse all nodes initially except root and first level
        root.descendants().forEach(d => {
            if (d.depth > 1) {
                if (d.children) {
                    d._children = d.children;
                    d.children = null;
                }
            }
        });
        
        let i = 0;
        
        function update(source) {
            // Compute the new tree layout
            const treeData = tree(root);
            const nodes = treeData.descendants();
            const links = treeData.descendants().slice(1);
            
            // Normalize for fixed-depth
            nodes.forEach(d => {
                d.y = d.depth * 180;
            });
            
            // Update nodes
            const node = g.selectAll('g.node')
                .data(nodes, d => d.id || (d.id = ++i));
            
            // Enter new nodes
            const nodeEnter = node.enter().append('g')
                .attr('class', 'node')
                .attr('transform', d => `translate(${source.y0 || 0},${source.x0 || 0})`)
                .on('click', click);
            
            // Add circles
            nodeEnter.append('circle')
                .attr('r', 1e-6)
                .style('fill', d => {
                    if (d.data.type === 'root') return '#ff6b6b';
                    if (d.data.type === 'category') return d.data.metadata?.color || '#4ecdc4';
                    if (d.data.type === 'project') return '#45b7d1';
                    if (d.data.type === 'todo') return d.data.metadata?.priority_color || '#ffa502';
                    return '#96ceb4';
                })
                .style('opacity', 0.8)
                .attr('class', d => d.data.type === 'todo' ? 'todo-node' : '');
            
            // Add labels
            nodeEnter.append('text')
                .attr('dy', '.35em')
                .attr('x', d => {
                    if (d.data.type === 'todo') return 8;  // Todo items have text to the right
                    return d.children || d._children ? -13 : 13;
                })
                .style('text-anchor', d => {
                    if (d.data.type === 'todo') return 'start';
                    return d.children || d._children ? 'end' : 'start';
                })
                .text(d => {
                    if (d.data.type === 'todo') {
                        const statusIcon = {
                            'initial': 'â­•',
                            'pending': 'ðŸŸ¡'
                        }[d.data.metadata?.status] || 'â­•';
                        return `${statusIcon} ${d.data.name.replace('ðŸ“‹ ', '')}`;
                    }
                    const icon = d.data.metadata?.icon || '';
                    return `${icon} ${d.data.name}`;
                })
                .style('fill-opacity', 1e-6)
                .style('font-size', d => d.data.type === 'todo' ? '10px' : '12px');
            
            // Add todo badges
            if (showTodos) {
                const todoBadges = nodeEnter.filter(d => d.data.todo_summary && d.data.todo_summary.total > 0)
                    .append('g')
                    .attr('class', 'todo-badge')
                    .attr('transform', 'translate(15, -15)');
                
                todoBadges.append('circle')
                    .attr('r', 8)
                    .style('fill', d => {
                        if (d.data.todo_summary.high_priority > 0) return '#ff4757';
                        if (d.data.todo_summary.medium_priority > 0) return '#ffa502';
                        return '#2ed573';
                    });
                
                todoBadges.append('text')
                    .text(d => d.data.todo_summary.total)
                    .attr('dy', '.35em')
                    .style('font-size', '10px')
                    .style('fill', 'white')
                    .style('text-anchor', 'middle');
            }
            
            // Transition nodes to their new position
            const nodeUpdate = nodeEnter.merge(node);
            
            nodeUpdate.transition()
                .duration(750)
                .attr('transform', d => `translate(${d.y},${d.x})`);
            
            nodeUpdate.select('circle')
                .attr('r', d => {
                    if (d.data.type === 'root') return 12;
                    if (d.data.type === 'category') return 10;
                    if (d.data.type === 'project') return 8;
                    if (d.data.type === 'todo') return 5;  // Smaller circles for todos
                    return 6;
                })
                .style('fill', d => {
                    if (d.data.type === 'root') return '#ff6b6b';
                    if (d.data.type === 'category') return d.data.metadata?.color || '#4ecdc4';
                    if (d.data.type === 'project') return '#45b7d1';
                    if (d.data.type === 'todo') return d.data.metadata?.priority_color || '#ffa502';
                    return '#96ceb4';
                })
                .attr('cursor', 'pointer');
            
            nodeUpdate.select('text')
                .style('fill-opacity', 1);
            
            // Update todo badges
            nodeUpdate.selectAll('.todo-badge')
                .style('display', showTodos ? 'block' : 'none');
            
            // Remove exiting nodes
            const nodeExit = node.exit().transition()
                .duration(750)
                .attr('transform', d => `translate(${source.y},${source.x})`)
                .remove();
            
            nodeExit.select('circle')
                .attr('r', 1e-6);
            
            nodeExit.select('text')
                .style('fill-opacity', 1e-6);
            
            // Update links
            const link = g.selectAll('path.link')
                .data(links, d => d.id);
            
            // Enter new links
            const linkEnter = link.enter().insert('path', 'g')
                .attr('class', 'link')
                .attr('d', d => {
                    const o = {x: source.x0 || 0, y: source.y0 || 0};
                    return diagonal(o, o);
                });
            
            // Transition links to their new position
            linkEnter.merge(link).transition()
                .duration(750)
                .attr('d', d => diagonal(d, d.parent));
            
            // Remove exiting links
            link.exit().transition()
                .duration(750)
                .attr('d', d => {
                    const o = {x: source.x, y: source.y};
                    return diagonal(o, o);
                })
                .remove();
            
            // Store the old positions for transition
            nodes.forEach(d => {
                d.x0 = d.x;
                d.y0 = d.y;
            });
        }
        
        // Diagonal line generator
        function diagonal(s, d) {
            const path = `M ${s.y} ${s.x}
                         C ${(s.y + d.y) / 2} ${s.x},
                           ${(s.y + d.y) / 2} ${d.x},
                           ${d.y} ${d.x}`;
            return path;
        }
        
        // Toggle children on click
        function click(event, d) {
            if (d.children) {
                d._children = d.children;
                d.children = null;
            } else {
                d.children = d._children;
                d._children = null;
            }
            update(d);
        }
        
        // Add tooltip functionality
        
        
        // Global functions for controls
        window.expandAll = function() {
            root.descendants().forEach(d => {
                if (d._children) {
                    d.children = d._children;
                    d._children = null;
                }
            });
            update(root);
        };
        
        window.collapseAll = function() {
            root.descendants().forEach(d => {
                if (d.children && d.depth > 0) {
                    d._children = d.children;
                    d.children = null;
                }
            });
            update(root);
        };
        
        window.resetView = function() {
            svg.transition().duration(750).call(zoom.transform, d3.zoomIdentity);
        };
        
        window.toggleTodos = function() {
            showTodos = !showTodos;
            const button = document.getElementById('todoToggle');
            if (button) {
                button.classList.toggle('active', showTodos);
                button.textContent = showTodos ? 'Hide Todos' : 'Show Todos';
            }
            update(root);
        };
        
        // Initial render
        root.x0 = height / 2;
        root.y0 = 0;
        update(root);
        
        // Center the view
        svg.call(zoom.transform, d3.zoomIdentity.translate(50, 50));
        
    </script>
</body>
</html>